


<div *ngIf="slotsSelected" class="slot-menu mat-elevation-z8" [ngStyle]="{top: cursorPositionY, left: cursorPositionX}">
    committee: <mat-form-field class="committee-select">
        <mat-select [(ngModel)]="committeeMultipleSelection" (selectionChange)="multipleCommitteeSelectionChanged($event)">
            <mat-option *ngFor="let committee of ['A','B','C','D']" [value]="committee">{{ committee }}</mat-option>
        </mat-select>
    </mat-form-field>
    <br>
    <div>
        <button (click)="closeSelectionMenu()" mat-button color="primary" cdkFocusInitial>Close</button>
        <button (click)="unselectSlots()" mat-raised-button color="primary" cdkFocusInitial>Unselect</button>
    </div>
</div>

<table class="committee-selection-table"> 
    <tr>
        <th>Time</th>
        <th *ngFor="let supervisor of supervisors">{{ supervisor.initials }}</th>
    </tr>
    <tr *ngFor="let time of times">
        <td>{{ time }}</td>
        <td class="committee-selection"
            [class.not-available]="!selectedSlots[supervisor.id][time].available" 
            [class.chairperson]="isChairperson(selectedSlots[supervisor.id][time])" 
            [class.hovered]="hoveredSlots[supervisor.id] && hoveredSlots[supervisor.id][time]" 
            [class.last-selection]="lastSelectedSlots[supervisor.id] && lastSelectedSlots[supervisor.id][time]" 
            (mouseenter)="onMouseEnter(supervisor.id, time)"
            (mousedown)="onMouseDown(supervisor.id, time)"
            (mouseup)="onMouseUp(supervisor.id, time, $event)"
            [class.selected]="(selectedSlots[supervisor.id] && selectedSlots[supervisor.id][time].committeeIdentifier)"
            *ngFor="let supervisor of supervisors"
        >
        <div class="committee-role-info">
            <div>
                <b>
                    <mat-icon *ngIf="isChairperson(selectedSlots[supervisor.id][time])">
                        groups
                    </mat-icon>
                </b>
                <p *ngIf="isChairperson(selectedSlots[supervisor.id][time])">
                    {{ chairpersonAssignment[selectedSlots[supervisor.id][time].committeeIdentifier!].classroom }}
                </p>
            </div>
            <div >
                {{ selectedSlots[supervisor.id][time].committeeIdentifier }}
            </div>
        </div>
        <span class="selection-indicator"></span>
        </td>
    </tr>
</table>
<div class="statistics-and-config-container">
    <defense-committee-statistics [statistics]="statistics"></defense-committee-statistics>
    <div class="committee-config-container">
        <div *ngFor="let assignment of chairpersonAssignment | keyvalue">
            <h3>{{assignment.key}}</h3>
            <mat-form-field>
                <mat-label>Chairperson</mat-label>
                <mat-select [(ngModel)]="chairpersonAssignment[assignment.key].chairpersonId" (selectionChange)="committeeChairpersonSelected($event, assignment.key)">
                    <mat-option [value]="null">---</mat-option>
                    <mat-option *ngFor="let supervisor of supervisors" [value]="supervisor.id">{{ supervisor.initials + ' | ' + supervisor.name }}</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field>
                <input placeholder="Classroom" [formControl]="classroomFormControls[assignment.key]" matInput type="text" />
            </mat-form-field>
        </div>
        <br>
        <div class="buttons-container"> 
            <button *ngIf="true" (click)="getDefenseSummary()" mat-button color="primary">Export summary</button>
        </div>
    </div>
</div>
